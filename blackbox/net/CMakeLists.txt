
include_directories (${CMAKE_SOURCE_DIR}/3rd_party/asio/include)

add_definitions(-DASIO_STANDALONE)

set(net_SOURCES
  Server.cpp
  Session.cpp
	commands.cpp
)

set(net_HEADERS
  Server.h
  Session.h
	Command.h
	commands.h
)

# bbproto + asn1
add_definitions("-DASSUMESTDTYPES") # asn1: use types from cstdint 
add_definitions("-DUSE_CXX_ALLOCATOR")
#add_definitions("-D_CRT_SECURE_NO_WARNINGS") # msvc shut up pls
include_directories(${CMAKE_BINARY_DIR}/bbproto)
file(GLOB files "${CMAKE_BINARY_DIR}/bbproto/*.c") # these files are generated by asn1c from trace_proto.asn1 
set_source_files_properties(${files} PROPERTIES LANGUAGE CXX) 

# asio
add_definitions("-DASIO_STANDALONE")

add_library(net STATIC ${net_SOURCES} ${net_HEADERS} ${files})

