project(bbcli)

include_directories(${CMAKE_SOURCE_DIR}/3rd_party/asio/include)

# bbproto + asn1
add_definitions("-DASSUMESTDTYPES") # asn1: use types from cstdint 
add_definitions("-DUSE_CXX_ALLOCATOR")
#add_definitions("-D_CRT_SECURE_NO_WARNINGS") # msvc shut up pls
include_directories(${CMAKE_BINARY_DIR}/bbproto)
file(GLOB files "${CMAKE_BINARY_DIR}/bbproto/*.c") # these files are generated by asn1c from trace_proto.asn1 
set_source_files_properties(${files} PROPERTIES LANGUAGE CXX) 

# asio
add_definitions("-DASIO_STANDALONE")

set(bbcli_SOURCES bbcli.cpp)
set(bbcli_HEADERS)

add_executable(bbcli ${bbcli_SOURCES} ${bbcli_HEADERS} ${files})
target_link_libraries(bbcli bbproto)
set_target_properties(bbcli PROPERTIES FOLDER "tools") 
install(TARGETS bbcli RUNTIME DESTINATION .	LIBRARY DESTINATION lib ARCHIVE DESTINATION lib/static) 

